# docker-file.yaml

前端 dockerfile

```dockerfile
# === 构建阶段 ===
FROM node:22-alpine AS build
WORKDIR /app

COPY package*.json ./
RUN npm install --production=false

COPY . .
RUN npm run build

# === 运行阶段：使用 Caddy 作为静态服务器 ===
FROM caddy:2-alpine

# 将构建产物复制到 Caddy 默认站点目录
COPY --from=build /app/dist /usr/share/caddy

# 复制 Caddyfile（如果你需要自定义路由）
COPY Caddyfile /etc/caddy/Caddyfile

```

后端 dockerfile

```dockerfile

# Stage 1: Builder
FROM golang:1.23-alpine AS builder

WORKDIR /app/main

# Copy go.mod and go.sum
COPY go.mod go.sum ./
RUN go mod download

# Copy the rest
COPY . .

# Build
RUN go mod tidy
RUN CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -o main .

# Stage 2: Production
FROM alpine:3.18

LABEL maintainer="john@goframe.org"

ENV WORKDIR /app/main

RUN mkdir -p $WORKDIR

# Copy binary
COPY --from=builder /app/main/main $WORKDIR/main
RUN chmod +x $WORKDIR/main

# Copy resources
COPY resource /app/main/resource

WORKDIR $WORKDIR

EXPOSE 8000

CMD ["./main"]

```

数据库也打算容器化。

```bash
todoList-react-goframe on  main [✘!?]
➜ ls
back-end  front-end readme.md
```
